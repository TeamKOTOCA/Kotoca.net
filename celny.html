<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Celestial New Year - å¤©æ–‡å­¦çš„å¹´è¶Šã—</title>
    <meta property="og:title" content="Celestial New Year | å¤©æ–‡å­¦çš„å¹´è¶Šã—ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³" />
    <meta property="og:description" content="å…µåº«çœŒæ˜çŸ³å¸‚ãªã‚“ã¦å ´æ‰€ã®å¹´è¶Šã—ã‚’è¿ãˆã¦ã‚‚ã­ã‡â€¦" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://kotoca.net/" />
    <meta property="og:image" content="https://kotoca.net/bg.png" />
    <meta property="og:site_name" content="Celestial New Year" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Celestial New Year | å¤©æ–‡å­¦çš„å¹´è¶Šã—" />
    <meta name="twitter:description" content="å…µåº«çœŒæ˜çŸ³å¸‚ãªã‚“ã¦å ´æ‰€ã®å¹´è¶Šã—ã‚’è¿ãˆã¦ã‚‚ã­ã‡â€¦" />
    <meta name="twitter:image" content="https://kotoca.net/bg.png" />

    <style>
        :root {
            --bg-color: #0b0e14;
            --accent-color: #ffd700;
            --text-color: #e0e0e0;
            --card-bg: rgba(255, 255, 255, 0.05);
        }

        body {
            margin: 0;
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-image: radial-gradient(circle at center, #1a1f2c 0%, #0b0e14 100%);
        }

        .container {
            text-align: center;
            padding: 2rem;
            background: var(--card-bg);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 215, 0, 0.2);
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
            max-width: 500px;
            width: 90%;
        }

        h1 {
            font-weight: 200;
            letter-spacing: 4px;
            margin-bottom: 2rem;
            color: var(--accent-color);
        }

        .input-group {
            margin-bottom: 1.5rem;
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        input[type="number"] {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #444;
            color: white;
            padding: 10px;
            border-radius: 5px;
            width: 120px;
            text-align: center;
        }

        button {
            background: transparent;
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
        }

        button:hover {
            background: var(--accent-color);
            color: black;
        }

        .result-display {
            margin-top: 2rem;
        }

        .time-label {
            font-size: 0.9rem;
            color: #888;
            margin-bottom: 0.5rem;
        }

        .time-value {
            font-size: 2.5rem;
            font-family: 'Courier New', Courier, monospace;
            color: var(--accent-color);
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .share-group {
            margin-top: 2rem;
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .btn-share {
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info {
            margin-top: 1.5rem;
            font-size: 0.8rem;
            line-height: 1.6;
            color: #aaa;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>CELESTIAL NY</h1>
    
    <div class="input-group">
        <input type="number" id="longitude" step="0.0001" placeholder="æ±çµŒã‚’å…¥åŠ›" value="135.0000">
        <button onclick="getLocation()">ç¾åœ¨åœ°ã‚’å–å¾—</button>
    </div>

    <div class="result-display">
        <div class="time-label">ã“ã®åœ°ç‚¹ã®å¹´è¶Šã—ï¼ˆJSTåŸºæº–ï¼‰</div>
        <div id="target-jst" class="time-value">00:00:00</div>
    </div>

    <div class="share-group">
        <button onclick="shareX()" class="btn-share">ğ• ã§ã‚·ã‚§ã‚¢</button>
        <button onclick="copyResult()" id="copy-btn" class="btn-share" style="border-color: #666; color: #ccc;">çµæœã‚’ã‚³ãƒ”ãƒ¼</button>
    </div>

    <div class="info">
        <p id="location-text">åŸºæº–åœ°ç‚¹: æ±çµŒ 135.0åº¦ (æ˜çŸ³å¸‚ä»˜è¿‘)</p>
        <p>çµŒåº¦ã«åŸºã¥ã„ãŸã€Œåœ°æ–¹å¹³å‡å¤ªé™½æ™‚ã€ã§ã®0æ™‚0åˆ†ã‚’ã€æ—¥æœ¬æ¨™æº–æ™‚(JST)ã§è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚</p>
        <p><small>ä½ç½®æƒ…å ±ã‚’å«ã‚€å…¨ãƒ‡ãƒ¼ã‚¿ã¯ãƒ–ãƒ©ã‚¦ã‚¶å†…ã§å‡¦ç†ã•ã‚Œã€ã‚µãƒ¼ãƒãƒ¼ã«é€ã‚‰ã‚Œã¾ã›ã‚“</small></p>
    </div>
</div>

<script>
    const longInput = document.getElementById('longitude');
    const targetDisplay = document.getElementById('target-jst');
    const locationText = document.getElementById('location-text');

    function calculateTime() {
        const longitude = parseFloat(longInput.value);
        if (isNaN(longitude)) return;

        const diffMinutes = (longitude - 135) * 4;
        let baseDate = new Date();
        baseDate.setHours(0, 0, 0, 0);
        
        const offsetMs = diffMinutes * 60 * 1000;
        const targetTime = new Date(baseDate.getTime() - offsetMs);

        const hours = String(targetTime.getHours()).padStart(2, '0');
        const minutes = String(targetTime.getMinutes()).padStart(2, '0');
        const seconds = String(targetTime.getSeconds()).padStart(2, '0');

        if (longitude > 135) {
            targetDisplay.innerText = `12/31 ${hours}:${minutes}:${seconds}`;
        } else if (longitude < 135) {
            targetDisplay.innerText = `01/01 ${hours}:${minutes}:${seconds}`;
        } else {
            targetDisplay.innerText = `00:00:00`;
        }

        locationText.innerText = `åœ°ç‚¹: æ±çµŒ ${longitude.toFixed(4)}åº¦ / JSTã¨ã®å·®: ${Math.abs(diffMinutes).toFixed(1)}åˆ†`;
    }

    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition((position) => {
                const lng = position.coords.longitude;
                longInput.value = lng.toFixed(4);
                calculateTime();
            }, () => {
                alert("ä½ç½®æƒ…å ±ãŒå–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚");
            });
        } else {
            alert("ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯ä½ç½®æƒ…å ±ã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚");
        }
    }

    // ã‚·ã‚§ã‚¢æ©Ÿèƒ½
    function getShareMessage() {
        const lng = parseFloat(longInput.value).toFixed(4);
        const time = targetDisplay.innerText;
        return `ç§ã®å ´æ‰€ï¼ˆæ±çµŒ${lng}åº¦ï¼‰ã§ã®å¤©æ–‡å­¦çš„ãªå¹´è¶Šã—æ™‚åˆ»ã¯ã€æ—¥æœ¬æ¨™æº–æ™‚ã§ã€${time}ã€‘ã§ã—ãŸã€‚ #CelestialNewYear #å¤©æ–‡å­¦çš„å¹´è¶Šã—`;
    }

    function shareX() {
        const text = encodeURIComponent(getShareMessage());
        const url = encodeURIComponent(window.location.href);
        window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
    }

    function copyResult() {
        const text = getShareMessage();
        navigator.clipboard.writeText(text).then(() => {
            const btn = document.getElementById('copy-btn');
            const originalText = btn.innerText;
            btn.innerText = "ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ";
            setTimeout(() => { btn.innerText = originalText; }, 2000);
        });
    }

    longInput.addEventListener('input', calculateTime);
    calculateTime();
</script>

</body>
</html>
